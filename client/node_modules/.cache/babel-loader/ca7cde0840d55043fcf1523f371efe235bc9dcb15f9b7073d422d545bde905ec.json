{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kauev\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\Nova pasta (2)\\\\client\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { GoogleOAuthProvider } from '@react-oauth/google';\nimport { io } from 'socket.io-client';\nimport { encryptMessage, decryptMessage } from './utils/common-utils';\n\n// Components\nimport UserProvider from './context/UserProvider';\nimport AccountProvider from './context/AccountProvider';\nimport Loader from './components/loader/Loader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Messenger = lazy(_c = () => import('./components/Messenger'));\n_c2 = Messenger;\nfunction App() {\n  _s();\n  const [socket, setSocket] = useState(null);\n  const clientId = '357218936319-286l96mv0ceqcqtiedrfbtsn4um2ivsr.apps.googleusercontent.com';\n  useEffect(() => {\n    const socket = io('http://localhost:9000');\n    setSocket(socket);\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n  const sendMessage = data => {\n    const {\n      conversationId,\n      text,\n      receiverId\n    } = data;\n    const conversationKey = conversationKeys[conversationId];\n    if (!conversationKey) {\n      console.error('Conversation key not found');\n      return;\n    }\n    const encryptedMessage = encryptMessage(text, conversationKey);\n    const encryptedData = {\n      ...data,\n      text: encryptedMessage.encryptedData,\n      iv: encryptedMessage.iv\n    };\n    socket.emit('sendMessage', encryptedData);\n  };\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('getMessage', data => {\n      const {\n        conversationId,\n        text,\n        iv\n      } = data;\n      const conversationKey = conversationKeys[conversationId];\n      if (!conversationKey) {\n        console.error('Conversation key not found');\n        return;\n      }\n      const decryptedText = decryptMessage(text, iv, conversationKey);\n      // Process decrypted message\n    });\n    return () => {\n      socket.off('getMessage');\n    };\n  }, [socket]);\n  return /*#__PURE__*/_jsxDEV(GoogleOAuthProvider, {\n    clientId: clientId,\n    children: /*#__PURE__*/_jsxDEV(UserProvider, {\n      children: /*#__PURE__*/_jsxDEV(AccountProvider, {\n        children: /*#__PURE__*/_jsxDEV(Suspense, {\n          fallback: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 41\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Messenger, {\n            sendMessage: sendMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"MD49kBfEVgatMLwr3M4nKQTkOEI=\");\n_c3 = App;\nexport default App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Messenger$lazy\");\n$RefreshReg$(_c2, \"Messenger\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["useEffect","useState","GoogleOAuthProvider","io","encryptMessage","decryptMessage","UserProvider","AccountProvider","Loader","jsxDEV","_jsxDEV","Messenger","lazy","_c","_c2","App","_s","socket","setSocket","clientId","disconnect","sendMessage","data","conversationId","text","receiverId","conversationKey","conversationKeys","console","error","encryptedMessage","encryptedData","iv","emit","on","decryptedText","off","children","Suspense","fallback","fileName","_jsxFileName","lineNumber","columnNumber","_c3","$RefreshReg$"],"sources":["C:/Users/kauev/OneDrive/Área de Trabalho/Nova pasta (2)/client/src/App.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { GoogleOAuthProvider } from '@react-oauth/google';\r\nimport { io } from 'socket.io-client';\r\nimport { encryptMessage, decryptMessage } from './utils/common-utils';\r\n\r\n// Components\r\nimport UserProvider from './context/UserProvider';\r\nimport AccountProvider from './context/AccountProvider';\r\nimport Loader from './components/loader/Loader';\r\nconst Messenger = lazy(() => import('./components/Messenger'));\r\n\r\nfunction App() {\r\n    const [socket, setSocket] = useState(null);\r\n\r\n    const clientId = '357218936319-286l96mv0ceqcqtiedrfbtsn4um2ivsr.apps.googleusercontent.com';\r\n\r\n    useEffect(() => {\r\n        const socket = io('http://localhost:9000');\r\n        setSocket(socket);\r\n\r\n        return () => {\r\n            socket.disconnect();\r\n        };\r\n    }, []);\r\n\r\n    const sendMessage = (data) => {\r\n        const { conversationId, text, receiverId } = data;\r\n        const conversationKey = conversationKeys[conversationId];\r\n        if (!conversationKey) {\r\n            console.error('Conversation key not found');\r\n            return;\r\n        }\r\n        const encryptedMessage = encryptMessage(text, conversationKey);\r\n        const encryptedData = { ...data, text: encryptedMessage.encryptedData, iv: encryptedMessage.iv };\r\n        socket.emit('sendMessage', encryptedData);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!socket) return;\r\n\r\n        socket.on('getMessage', (data) => {\r\n            const { conversationId, text, iv } = data;\r\n            const conversationKey = conversationKeys[conversationId];\r\n            if (!conversationKey) {\r\n                console.error('Conversation key not found');\r\n                return;\r\n            }\r\n            const decryptedText = decryptMessage(text, iv, conversationKey);\r\n            // Process decrypted message\r\n        });\r\n\r\n        return () => {\r\n            socket.off('getMessage');\r\n        };\r\n    }, [socket]);\r\n\r\n    return (\r\n        <GoogleOAuthProvider clientId={clientId}>\r\n            <UserProvider>\r\n                <AccountProvider>\r\n                    <Suspense fallback={<Loader />}>\r\n                        <Messenger sendMessage={sendMessage} />\r\n                    </Suspense>\r\n                </AccountProvider>\r\n            </UserProvider>\r\n        </GoogleOAuthProvider>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}